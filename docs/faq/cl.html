<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-faq/cl" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Core Lightning | RaspiBlitz</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.raspiblitz.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.raspiblitz.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.raspiblitz.org/docs/faq/cl"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Core Lightning | RaspiBlitz"><meta data-rh="true" name="description" content="Common questions about the different Lightning Network implementations"><meta data-rh="true" property="og:description" content="Common questions about the different Lightning Network implementations"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.raspiblitz.org/docs/faq/cl"><link data-rh="true" rel="alternate" href="https://docs.raspiblitz.org/docs/faq/cl" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.raspiblitz.org/docs/faq/cl" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H1OPUQUC79-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="RaspiBlitz" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.7f4c0b8f.css">
<script src="/assets/js/runtime~main.e54806f8.js" defer="defer"></script>
<script src="/assets/js/main.797a6287.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/RaspiBlitz_Logo_Main_Negative.svg" alt="RaspiBlitz logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/RaspiBlitz_Logo_Main_Negative.svg" alt="RaspiBlitz logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/raspiblitz/raspiblitz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://docs.raspiblitz.org/docs/setup/software-setup/download" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Download<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/security">Security Policy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/raspiblitz-setup">RaspiBlitz Setup</a><button aria-label="Expand sidebar category &#x27;RaspiBlitz Setup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/raspiblitz-usage">RaspiBlitz Usage</a><button aria-label="Expand sidebar category &#x27;RaspiBlitz Usage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/community-resources">Community Resources</a><button aria-label="Expand sidebar category &#x27;Community Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/faqs">FAQ&#x27;s</a><button aria-label="Collapse sidebar category &#x27;FAQ&#x27;s&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/faq/cl">Core Lightning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/contribute">contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/dev">dev</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/shops">Shops</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/faqs"><span itemprop="name">FAQ&#x27;s</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Core Lightning</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Core Lightning</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-questions-about-the-different-lightning-network-implementations">Common questions about the different Lightning Network implementations<a href="#common-questions-about-the-different-lightning-network-implementations" class="hash-link" aria-label="Direct link to Common questions about the different Lightning Network implementations" title="Direct link to Common questions about the different Lightning Network implementations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-lnd-and-cln-nodes-open-channels-to-each-other-and-route-payments">Can LND and CLN nodes open channels to each other and route payments?<a href="#can-lnd-and-cln-nodes-open-channels-to-each-other-and-route-payments" class="hash-link" aria-label="Direct link to Can LND and CLN nodes open channels to each other and route payments?" title="Direct link to Can LND and CLN nodes open channels to each other and route payments?">​</a></h3>
<ul>
<li>Yes, all <a href="https://github.com/lightningnetwork/lightning-rfc" target="_blank" rel="noopener noreferrer">BOLT specification</a> compliant implementations can open channels to each other and route payments.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-run-lnd-and-cln-connected-to-the-same-node">Can I run LND and CLN connected to the same node?<a href="#can-i-run-lnd-and-cln-connected-to-the-same-node" class="hash-link" aria-label="Direct link to Can I run LND and CLN connected to the same node?" title="Direct link to Can I run LND and CLN connected to the same node?">​</a></h3>
<ul>
<li>Yes, both can run parallel on a RaspiBlitz and even have channels with each other.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-convert-an-lnd-node-to-cln-or-the-opposite">Can I convert an LND node to CLN (or the opposite)?<a href="#can-i-convert-an-lnd-node-to-cln-or-the-opposite" class="hash-link" aria-label="Direct link to Can I convert an LND node to CLN (or the opposite)?" title="Direct link to Can I convert an LND node to CLN (or the opposite)?">​</a></h3>
<ul>
<li>No, currently there are no tools available to convert between the databases storing the channel states.
The channels would need to be closed to use the same funds in an other node.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="is-there-a-table-to-quickly-compare-lnd-and-cln">Is there a table to quickly compare LND and CLN?<a href="#is-there-a-table-to-quickly-compare-lnd-and-cln" class="hash-link" aria-label="Direct link to Is there a table to quickly compare LND and CLN?" title="Direct link to Is there a table to quickly compare LND and CLN?">​</a></h3>
<ul>
<li>see <a href="https://github.com/openoms/lightning-node-management/blob/master/node-types/comparison.md" target="_blank" rel="noopener noreferrer">github.com/openoms/lightning-node-management/blob/master/node-types/comparison.md</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cln-official-documentation-and-support-channels">CLN official documentation and support channels<a href="#cln-official-documentation-and-support-channels" class="hash-link" aria-label="Direct link to CLN official documentation and support channels" title="Direct link to CLN official documentation and support channels">​</a></h2>
<ul>
<li><a href="https://lightning.readthedocs.io/" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/</a></li>
<li><a href="https://github.com/ElementsProject/lightning" target="_blank" rel="noopener noreferrer">https://github.com/ElementsProject/lightning</a></li>
<li>Telegram: <a href="https://t.me/lightningd" target="_blank" rel="noopener noreferrer">https://t.me/lightningd</a></li>
<li>Discord: <a href="https://discord.gg/YGdpyj2aXj" target="_blank" rel="noopener noreferrer">https://discord.gg/YGdpyj2aXj</a></li>
<li>IRC: #c-lightning on libera.chat or <a href="https://matrix.to/#/#c-lightning:libera.chat" target="_blank" rel="noopener noreferrer">https://matrix.to/#/#c-lightning:libera.chat</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commands-and-aliases">Commands and aliases<a href="#commands-and-aliases" class="hash-link" aria-label="Direct link to Commands and aliases" title="Direct link to Commands and aliases">​</a></h2>
<ul>
<li>Check if the CLN daemon is running:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl status lightningd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Follow it&#x27;s system output for debugging:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo journalctl -fu lightningd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>The logs can be accessed in the menu <code>SYSTEM</code> - <code>CLLOG</code>
or with the alias: <code>cllog</code></li>
<li>The frequently used commands are shortened with alisases. Check them with the command <code>alias</code>:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alias cl=&#x27;sudo -u bitcoin /usr/local/bin/lightning-cli --conf=/home/bitcoin/.lightning/config&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alias clconf=&#x27;sudo nano /home/bitcoin/.lightning/config&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alias cllog=&#x27;sudo tail -n 30 -f /home/bitcoin/.lightning/bitcoin/cl.log&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="directories">Directories<a href="#directories" class="hash-link" aria-label="Direct link to Directories" title="Direct link to Directories">​</a></h2>
<ul>
<li>All data is stored on the disk in:
<code>/mnt/hdd/app-data/.lightningd</code></li>
<li>and symlinked to:
<code>/home/bitcoin/.lightningd</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="config-file">Config file<a href="#config-file" class="hash-link" aria-label="Direct link to Config file" title="Direct link to Config file">​</a></h2>
<ul>
<li>Edit in the menu <code>SYSTEM</code> - <code>CLNCONF</code> or use the alias <code>clconf</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-values">Default values<a href="#default-values" class="hash-link" aria-label="Direct link to Default values" title="Direct link to Default values">​</a></h3>
<ul>
<li>on the RaspiBlitz for mainnet<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">network=bitcoin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">log-file=cl.log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">log-level=info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">plugin-dir=/home/bitcoin/cln-plugins-enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Tor settings</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">proxy=127.0.0.1:9050</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bind-addr=127.0.0.1:9736</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">addr=statictor:127.0.0.1:9051/torport=9736</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">always-use-proxy=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>find <a href="#all-possible-config-options">all the possible config options</a> below.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cln-cheatsheet">CLN cheatsheet<a href="#cln-cheatsheet" class="hash-link" aria-label="Direct link to CLN cheatsheet" title="Direct link to CLN cheatsheet">​</a></h2>
<p><a href="https://github.com/grubles/cln-cheatsheet" target="_blank" rel="noopener noreferrer">cheat sheet</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plug-ins">Plug-ins<a href="#plug-ins" class="hash-link" aria-label="Direct link to Plug-ins" title="Direct link to Plug-ins">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-info">General info<a href="#general-info" class="hash-link" aria-label="Direct link to General info" title="Direct link to General info">​</a></h3>
<ul>
<li><a href="https://lightning.readthedocs.io/PLUGINS.html#a-day-in-the-life-of-a-plugin" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/PLUGINS.html#a-day-in-the-life-of-a-plugin</a></li>
<li><a href="https://github.com/lightningd/plugins/" target="_blank" rel="noopener noreferrer">https://github.com/lightningd/plugins/</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="directories-1">Directories<a href="#directories-1" class="hash-link" aria-label="Direct link to Directories" title="Direct link to Directories">​</a></h3>
<ul>
<li>The plugins are installed to:
<code>/home/bitcoin/cl-plugins-available</code></li>
<li>and symlinked to:
<code>/home/bitcoin/cl-plugins-enabled</code></li>
<li>All plugins in the <code>/home/bitcoin/cl-plugins-enabled</code> directory are loaded automatically as set in the config file: <code>/home/bitcoin/.lightningd/config</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implemented-plugins">Implemented plugins<a href="#implemented-plugins" class="hash-link" aria-label="Direct link to Implemented plugins" title="Direct link to Implemented plugins">​</a></h3>
<ul>
<li>summary</li>
<li>sparko</li>
<li><a href="#clboss">CLBOSS</a></li>
<li><a href="#feeadjuster">feeadjuster</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-custom-plugin">Add a custom plugin<a href="#add-a-custom-plugin" class="hash-link" aria-label="Direct link to Add a custom plugin" title="Direct link to Add a custom plugin">​</a></h3>
<ul>
<li>Place the plugin in the <code>/home/bitcoin/cl-plugins-enabled</code> directory</li>
<li>Make sure it is owned by the <code>bitcoin</code> user and is executable:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo chown bitcoin:bitcoin /home/bitcoin/cl-plugins-enabled/PLUGIN_NAME</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo chmod +x /home/bitcoin/cl-plugins-enabled/PLUGIN_NAME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>start with<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli plugin start /home/bitcoin/cl-plugins-enabled/PLUGIN_NAME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>or to load it automatically on restart:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl restart lightningd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->From the directory <code>/home/bitcoin/cl-plugins-enabled</code> it will load auomatically after restarts.</li>
<li>To just load it run it once store in (and start from):
<code>/home/bitcoin/cl-plugins-available/</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clboss">CLBOSS<a href="#clboss" class="hash-link" aria-label="Direct link to CLBOSS" title="Direct link to CLBOSS">​</a></h3>
<p>A plugin for automatic LN node management.
CLBOSS only requires to have funds deposited to the onchain wallet of CLN.
The recommended amount to start is ~ 10 million satoshis (0.1 BTC).</p>
<p>It does automatically:</p>
<ul>
<li>generate outbound capacity - opens channels</li>
<li>generate inbound capacity - submarine swaps through the boltz.exchange API</li>
<li>aware of onchain fees and mempool through CLN and makes transactions when fees are low</li>
<li>manages rebalancing - performs probing</li>
<li>closes bad channels (inactive or low traffic) - this function needs to activated manually</li>
</ul>
<p>Overall it is a tool which makes users able to send and receive lightning payments with minimal interaction, basically setting up a routing node by itself.</p>
<p>The transactions made by CLBOSS does cost money and running it requires a fair amount of trust in the (fully open-source - MIT) code.
Neither the CLBOSS nor the RaspiBlitz developers can take responsibility for lost sats, use at your own discretion!</p>
<ul>
<li>Activate it in the menu - <code>SETTINGS</code> - <code>-CL CLBOSS</code></li>
<li>Discussion: <a href="https://github.com/rootzoll/raspiblitz/issues/2490" target="_blank" rel="noopener noreferrer">https://github.com/rootzoll/raspiblitz/issues/2490</a></li>
<li>Advanced usage
<a href="https://github.com/ZmnSCPxj/clboss#clboss-status" target="_blank" rel="noopener noreferrer">https://github.com/ZmnSCPxj/clboss#clboss-status</a></li>
<li>Stopping CLBOSS will leave the node in the last state. No channels will be closed or funds removed when CLBOSS is uninstalled.</li>
<li>Check the running version:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/bitcoin/cl-plugins-enabled/clboss --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feeadjuster">Feeadjuster<a href="#feeadjuster" class="hash-link" aria-label="Direct link to Feeadjuster" title="Direct link to Feeadjuster">​</a></h3>
<ul>
<li>
<p>Install:
<code>config.scripts/cl-plugin.feeadjuster.sh on</code></p>
</li>
<li>
<p>to set the default fees add to the CLN config file (<code>clconf</code>)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fee-base=BASEFEE_IN_MILLISATS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fee-per-satoshi=PPM_FEE_IN_SATS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>example feeadjuster options</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fee-base=0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fee-per-satoshi=200</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">feeadjuster-imbalance=0.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">feeadjuster-threshold=0.10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">feeadjuster-threshold-abs=0.01btc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">feeadjuster-enough-liquidity=1000000000msat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">feeadjuster-deactivate-fee-update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">feeadjuster-adjustment-method=hard</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>effect displayed in the logs (<code>cllog</code>)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">plugin-feeadjuster.py:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Plugin feeadjuster initialized (0 base / 200 ppm) with an imbalance of 20%/80%,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">update_threshold: 10%, update_threshold_abs: 1000000000msat,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">enough_liquidity: 1000000000msat, deactivate_fuzz: None,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">forward_event_subscription: False, adjustment_method: get_ratio_hard,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fee_strategy: get_fees_global, listchannels_by_dst: True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>more options for the feeadjuster to be set in the CLN config can be seen in the <a href="https://github.com/lightningd/plugins/blob/master/feeadjuster/feeadjuster.py#L323" target="_blank" rel="noopener noreferrer">code</a></p>
</li>
<li>
<p>start the feeadjuster</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl plugin start /home/bitcoin/cl-plugins-available/plugins/feeadjuster/feeadjuster.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>stop (best to run only periodically)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl plugin stop /home/bitcoin/cl-plugins-available/plugins/feeadjuster/feeadjuster.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Can use menu - <code>CL</code> - <code>SUEZ</code> to visualize the channel balances and fee settings</p>
</li>
<li>
<p>check the list of base fees</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl listpeers | grep fee_base_msat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>check the list of proportional fees</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl listpeers | grep fee_proportional_millionths</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>set the fees to the defaults</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl setchannelfee all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dual-funded-channels">Dual funded channels<a href="#dual-funded-channels" class="hash-link" aria-label="Direct link to Dual funded channels" title="Direct link to Dual funded channels">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reading">Reading<a href="#reading" class="hash-link" aria-label="Direct link to Reading" title="Direct link to Reading">​</a></h4>
<ul>
<li><a href="https://medium.com/blockstream/c-lightning-opens-first-dual-funded-mainnet-lightning-channel-ada6b32a527c" target="_blank" rel="noopener noreferrer">https://medium.com/blockstream/c-lightning-opens-first-dual-funded-mainnet-lightning-channel-ada6b32a527c</a></li>
<li><a href="https://medium.com/blockstream/setting-up-liquidity-ads-in-c-lightning-54e4c59c091d" target="_blank" rel="noopener noreferrer">https://medium.com/blockstream/setting-up-liquidity-ads-in-c-lightning-54e4c59c091d</a></li>
<li><a href="https://twitter.com/niftynei/status/1389328732377255938" target="_blank" rel="noopener noreferrer">https://twitter.com/niftynei/status/1389328732377255938</a></li>
<li>lightning-rfc PR: <a href="https://github.com/lightningnetwork/lightning-rfc/pull/851/files" target="_blank" rel="noopener noreferrer">https://github.com/lightningnetwork/lightning-rfc/pull/851/files</a></li>
<li>represented by the feature bits 28/29</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up">Setting up<a href="#setting-up" class="hash-link" aria-label="Direct link to Setting up" title="Direct link to Setting up">​</a></h4>
<ul>
<li>
<p>activate the feature on your node:
Type: <code>clconf</code> or use the menu <code>SYSTEM</code> - <code>CLCONF</code>.
Add the line:
<code>    experimental-dual-fund</code>
Save and restart CLN.</p>
</li>
<li>
<p>set up a liquidity ad:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli funderupdate -k policy=match policy_mod=100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or set in the config for example - see the meaning of each line in <a href="https://medium.com/blockstream/setting-up-liquidity-ads-in-c-lightning-54e4c59c091d" target="_blank" rel="noopener noreferrer">https://medium.com/blockstream/setting-up-liquidity-ads-in-c-lightning-54e4c59c091d</a> :</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">experimental-dual-fund</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">funder-policy=match</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">funder-policy-mod=100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lease-fee-base-msat=500sat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lease-fee-basis=50</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">channel-fee-max-base-msat=100sat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">channel-fee-max-proportional-thousandths=2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>check the settings used currently on your node:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli funderupdate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>check your advertised settings (needs some minutes to appear):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listnodes $(lightning-cli getinfo | jq .id)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="open-a-dual-funded-channel">Open a dual funded channel<a href="#open-a-dual-funded-channel" class="hash-link" aria-label="Direct link to Open a dual funded channel" title="Direct link to Open a dual funded channel">​</a></h4>
<ul>
<li>
<p>check if a node has onchain liquidity on offer:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listnodes nodeid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listnodes 02cca6c5c966fcf61d121e3a70e03a1cd9eeeea024b26ea666ce974d43b242e636</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>list all nodes known in the graph with active offers:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listnodes | grep option_will_fund -B20 -A7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>note the node <code>id</code> and <code>compact_lease</code></p>
</li>
<li>
<p>connect to the node</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli connect nodeID@IP_or.onion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fundchannel-syntax">Fundchannel syntax<a href="#fundchannel-syntax" class="hash-link" aria-label="Direct link to Fundchannel syntax" title="Direct link to Fundchannel syntax">​</a></h4>
<ul>
<li>
<p>the amount is the own funds in the wallet contributed
use equal amounts to have a balanced channel from start
the amounts can be specified in <code>sat</code> or <code>btc</code>
<code>    lightning-cli fundchannel -k id=NODE_ID amount=OWN_AMOUNTsat request_amt=PEER_CONTRIBUTION_AMOUNTsat compact_lease=COMPACT_LEASE</code>
It can fail if the offer changed or there are not enough funds available on either side.</p>
</li>
<li>
<p>open a dual funded channel with a chosen utxo and miner feerate
list the utxo-s with <code>lightning-cli listfunds</code>, can list multiple
the feerate is in <code>perkb</code> by default, e.g. use 1000 for 1 sat/byte
<code>    lightning-cli fundchannel feerate=PERKB_FEERATE utxos=&#x27;[&quot;TRANSACTION_ID:INDEX_NUMBER&quot;]&#x27; -k id=NODE_ID amount=OWN_AMOUNTsat request_amt=PEER_CONTRIBUTION_AMOUNTsat compact_lease=COMPACT_LEASE</code></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multifundchannel-syntax">Multifundchannel syntax<a href="#multifundchannel-syntax" class="hash-link" aria-label="Direct link to Multifundchannel syntax" title="Direct link to Multifundchannel syntax">​</a></h4>
<ul>
<li>
<p>discussed in <a href="https://github.com/ElementsProject/lightning/issues/4642#issuecomment-1149657371" target="_blank" rel="noopener noreferrer">https://github.com/ElementsProject/lightning/issues/4642#issuecomment-1149657371</a></p>
</li>
<li>
<p>see a good format (json autoformatting tools help - like <code>CTRL</code>+<code>SHIFT</code>+<code>i</code> in VSCode):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">₿ lightning-cli multifundchannel &#x27;[</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;id&quot;: &quot;nodeID1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;amount&quot;: &quot;amount_in_sats&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;id&quot;: &quot;nodeID2&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;amount&quot;: &quot;amount_in_sats&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;id&quot;: &quot;nodeID3&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;amount&quot;: &quot;amount_in_sats&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;id&quot;: &quot;nodeID4&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;amount&quot;: &quot;amount_in_sats&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]&#x27; 1000perkb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>The returned output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;tx&quot;: &quot;RAW............TX&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;txid&quot;: &quot;TX................ID&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;channel_ids&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;id&quot;: &quot;nodeID1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;channel_id&quot;: &quot;CHANNEL_ID2&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;outnum&quot;: 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;id&quot;: &quot;nodeID2&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;channel_id&quot;: &quot;CHANNEL_ID1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;outnum&quot;: 4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;id&quot;: &quot;nodeID3&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;channel_id&quot;: &quot;CHANNEL_ID4&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;outnum&quot;: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;id&quot;: &quot;nodeID4&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;channel_id&quot;: &quot;CHANNEL_ID3&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;outnum&quot;: 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;failed&quot;: []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="offers">Offers<a href="#offers" class="hash-link" aria-label="Direct link to Offers" title="Direct link to Offers">​</a></h3>
<ul>
<li>
<p>Details at bolt12.org</p>
</li>
<li>
<p>Create an offer to receive payments:
<a href="https://lightning.readthedocs.io/lightning-offer.7.html" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/lightning-offer.7.html</a>
<code>    lightning-cli offer amount description [vendor] [label] [quantity_min] [quantity_max] [absolute_expiry] [recurrence] [recurrence_base] [recurrence_paywindow] [recurrence_limit] [single_use]</code></p>
</li>
<li>
<p>Example:
Create a reusable offer which can be paid with any amount for LN tips using a fixed string.
<code>    lightning-cli offer any tip</code></p>
</li>
<li>
<p>Create an offer to send payments:
<a href="https://lightning.readthedocs.io/lightning-offerout.7.html" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/lightning-offerout.7.html</a>
<code>    lightning-cli offerout amount description [vendor] [label] [absolute_expiry] [refund_for]</code></p>
</li>
<li>
<p>Fetch an invoice to pay an offer:
<a href="https://lightning.readthedocs.io/lightning-fetchinvoice.7.html" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/lightning-fetchinvoice.7.html</a>
Will need at least one peer which supports onion the messages. For example:
<code>    lightning-cli connect 024b9a1fa8e006f1e3937f65f66c408e6da8e1ca728ea43222a7381df1cc449605@128.199.202.168:9735</code></p>
</li>
<li>
<p>Then use the command to fetch the BOLT12 invoice:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli fetchinvoice offer [msatoshi] [quantity] [recurrence_counter] [recurrence_start] [recurrence_label] [timeout] [payer_note]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>decode a BOLT12 invoice:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli decode bolt12_invoice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>pay a a BOLT12 invoice:
Will need to pay through a peer which supports the onion messages which means you need at least one channel with such a node.
<code>    lightning-cli pay bolt12_invoice</code></p>
</li>
<li>
<p>see if there is a new invoice is paid with:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listinvoices</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>pay_index</code> will increase as the offer gets reused.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="poncho---hosted-channels">Poncho - hosted channels<a href="#poncho---hosted-channels" class="hash-link" aria-label="Direct link to Poncho - hosted channels" title="Direct link to Poncho - hosted channels">​</a></h3>
<ul>
<li>hosted channels: <a href="https://github.com/fiatjaf/poncho/" target="_blank" rel="noopener noreferrer">https://github.com/fiatjaf/poncho/</a></li>
<li><a href="https://github.com/rootzoll/raspiblitz/issues/3269" target="_blank" rel="noopener noreferrer">https://github.com/rootzoll/raspiblitz/issues/3269</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="feature-bits">Feature bits<a href="#feature-bits" class="hash-link" aria-label="Direct link to Feature bits" title="Direct link to Feature bits">​</a></h2>
<ul>
<li><a href="https://bitcoin.stackexchange.com/questions/107484/how-can-i-decode-the-feature-string-of-a-lightning-node-with-bolt-9" target="_blank" rel="noopener noreferrer">https://bitcoin.stackexchange.com/questions/107484/how-can-i-decode-the-feature-string-of-a-lightning-node-with-bolt-9</a></li>
<li>Convert the hex number from <code>lightning-cli listpeers</code> to binary: <a href="https://www.binaryhexconverter.com/hex-to-binary-converter" target="_blank" rel="noopener noreferrer">https://www.binaryhexconverter.com/hex-to-binary-converter</a> and count the position of the bits from the right.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testnets">Testnets<a href="#testnets" class="hash-link" aria-label="Direct link to Testnets" title="Direct link to Testnets">​</a></h2>
<ul>
<li>
<p>for testnet and signet there are prefixes <code>t</code> and <code>s</code> used for the aliases, daemons and their own plugin directory names.</p>
</li>
<li>
<p>Testnet</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># alias:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcl | tclconf | tcllog</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># daemon service name:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tlightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># config file:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/bitcoin/.lightningd/testnet/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># plugin directory:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/bitcoin/tcl-plugins-enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Signet</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># aliases:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scl | sclconf | scllog</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># daemon service name:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">slightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># config file:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/bitcoin/.lightningd/signet/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># plugin directory:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/bitcoin/scl-plugins-enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="backups">Backups<a href="#backups" class="hash-link" aria-label="Direct link to Backups" title="Direct link to Backups">​</a></h2>
<ul>
<li><a href="https://lightning.readthedocs.io/FAQ.html#how-to-backup-my-wallet" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/FAQ.html#how-to-backup-my-wallet</a></li>
<li>General details: <a href="https://lightning.readthedocs.io/BACKUP.html" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/BACKUP.html</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup-strategy">Backup strategy<a href="#backup-strategy" class="hash-link" aria-label="Direct link to Backup strategy" title="Direct link to Backup strategy">​</a></h3>
<ul>
<li>
<p>discussed in <a href="https://github.com/rootzoll/raspiblitz/issues/2983" target="_blank" rel="noopener noreferrer">https://github.com/rootzoll/raspiblitz/issues/2983</a></p>
</li>
<li>
<p>store your seed (or the <code>hsm_secret</code> HEX) as text.</p>
</li>
<li>
<p>the channel database (<code>lightningd.sqlite3</code>) is replicated to the SDcard real-time.</p>
</li>
<li>
<p>can make a cl-rescue file from time-to-time so you have a backup of the onchain wallet (<code>hsm_secret</code> - generated from the seed) and the channel database (<code>lightningd.sqlite3</code> - can be restored as a last resort - will trigger force closes with the peers).</p>
</li>
<li>
<p>A future CLN version will have an SCB like functionality, but will be stored automatically with the peers (encrypted over LN), see the PR: <a href="https://github.com/ElementsProject/lightning/pull/5361" target="_blank" rel="noopener noreferrer">ElementsProject/lightning#5361</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="seed">Seed<a href="#seed" class="hash-link" aria-label="Direct link to Seed" title="Direct link to Seed">​</a></h3>
<ul>
<li>By default a BIP39 wordlist compatible, 24 words seed is used to generate the <code>hsm_secret</code></li>
<li>If the wallet was generated or restored from seed on a RaspiBlitz the seed is stored in the disk with the option to encrypt</li>
<li>Display the seed from the menu - <code>CL</code> - <code>SEED</code></li>
<li>The file where the seed is stored (until encrypted) is on the disk: <code>/home/bitcoin/.lightning/bitcoin/seedwords.info</code></li>
<li>Show manually with:
<code>sudo cat /home/bitcoin/.lightning/bitcoin/seedwords.info</code></li>
<li>If there is no such file and you have not funded the CLN wallet yet can reset the wallet and the next wallet will be created with a seed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-display-the-hsm_secret-in-a-human-readable-format">How to display the hsm_secret in a human-readable format?<a href="#how-to-display-the-hsm_secret-in-a-human-readable-format" class="hash-link" aria-label="Direct link to How to display the hsm_secret in a human-readable format?" title="Direct link to How to display the hsm_secret in a human-readable format?">​</a></h3>
<ul>
<li>If there is no seed available it is best to save the hsm_secret as a file with <code>scp</code> or note down the alphanumeric characters in the two line displayed with:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo xxd /home/bitcoin/.lightning/bitcoin/hsm_secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-test-the-seedwords">How to test the seedwords?<a href="#how-to-test-the-seedwords" class="hash-link" aria-label="Direct link to How to test the seedwords?" title="Direct link to How to test the seedwords?">​</a></h3>
<ul>
<li>
<p>The manual process:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># display the hsm_secret in hex:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin xxd /home/bitcoin/.lightning/bitcoin/hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># input seed and generate an hsm_secret in a temporary location:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-hsmtool generatehsm /dev/shm/test_hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># compare</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">xxd /dev/shm/test_hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># delete temp file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">srm /dev/shm/test_hsm_secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-restore-the-hsm_secret-from-text">How to restore the hsm_secret from text?<a href="#how-to-restore-the-hsm_secret-from-text" class="hash-link" aria-label="Direct link to How to restore the hsm_secret from text?" title="Direct link to How to restore the hsm_secret from text?">​</a></h3>
<ul>
<li>
<p>example from <a href="https://lightning.readthedocs.io/BACKUP.html#backing-up-your-c-lightning-node" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/BACKUP.html#backing-up-your-c-lightning-node</a>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat &gt; hsm_secret_hex.txt &lt;&lt;HEX</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">00: 30cc f221 94e1 7f01 cd54 d68c a1ba f124</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">10: e1f3 1d45 d904 823c 77b7 1e18 fd93 1676</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HEX</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">xxd -r hsm_secret_hex.txt &gt; hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># move in place (will overwrite! - remove the ##)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## sudo mv /home/bitcoin/.lightning/bitcoin/hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># fix the owner and tighten permissions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo chown bitcoin:bitcoin  /home/bitcoin/.lightning/bitcoin/hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chmod 0400  /home/bitcoin/.lightning/bitcoin/hsm_secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel-database">Channel database<a href="#channel-database" class="hash-link" aria-label="Direct link to Channel database" title="Direct link to Channel database">​</a></h3>
<ul>
<li>Stored on the disk and synchronised to the SDcard with the help of the <code>backup</code> plugin.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recovery">Recovery<a href="#recovery" class="hash-link" aria-label="Direct link to Recovery" title="Direct link to Recovery">​</a></h2>
<ul>
<li><a href="https://lightning.readthedocs.io/FAQ.html#database-corruption-channel-state-lost" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/FAQ.html#database-corruption-channel-state-lost</a></li>
<li><a href="https://lightning.readthedocs.io/FAQ.html#loss" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/FAQ.html#loss</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recover-from-a-cl-rescue-file">Recover from a cl-rescue file<a href="#recover-from-a-cl-rescue-file" class="hash-link" aria-label="Direct link to Recover from a cl-rescue file" title="Direct link to Recover from a cl-rescue file">​</a></h3>
<ul>
<li>use the <code>REPAIR-CL</code> - <code>FILERESTORE</code> option in the menu for instructions to upload</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recover-from-a-seed">Recover from a seed<a href="#recover-from-a-seed" class="hash-link" aria-label="Direct link to Recover from a seed" title="Direct link to Recover from a seed">​</a></h3>
<ul>
<li>
<p>use the <code>REPAIR-CL</code> - <code>SEEDRESTORE</code> option in the menu for instructions to paste the seedwords to restore</p>
</li>
<li>
<p>or use the manual commands</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># stop CLN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl stop lightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># change to the bitcoin user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo su - bitcoin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># generate the hsm_secret in temporary directory from your CLN seed words (follow the instructions)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> lightning-hsmtool generatehsm /dev/shm/hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># backup your old hsm_secret and channel database</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir /home/bitcoin/.lightning/bitcoin/old_node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mv /home/bitcoin/.lightning/bitcoin/** /home/bitcoin/.lightning/bitcoin/old_node/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># move the new hsm_secret in place</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mv /dev/shm/hsm_secret /home/bitcoin/.lightning/bitcoin/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># back to admin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># start lightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl start lightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># show the logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cllog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="emergency-recovery-in-case-of-lost-channel-states">Emergency recovery in case of lost channel states<a href="#emergency-recovery-in-case-of-lost-channel-states" class="hash-link" aria-label="Direct link to Emergency recovery in case of lost channel states" title="Direct link to Emergency recovery in case of lost channel states">​</a></h3>
<ul>
<li>blogpost: <a href="https://blog.blockstream.com/core-lightning-v0-12-0/" target="_blank" rel="noopener noreferrer">https://blog.blockstream.com/core-lightning-v0-12-0/</a></li>
<li>demo video: <a href="https://youtu.be/zBmEieZuS8Q" target="_blank" rel="noopener noreferrer">https://youtu.be/zBmEieZuS8Q</a></li>
<li>manpage: <a href="https://lightning.readthedocs.io/lightning-emergencyrecover.7.html" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/lightning-emergencyrecover.7.html</a>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli help emergencyrecover</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<ol>
<li>
<p><a href="#recover-from-a-seed">Restore the hsm_secret (onchain wallet keys) from seed</a> (or hex).</p>
<ul>
<li>There is no need to wait for the (few hours) rescan to finish, but can follow it any time with:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cllog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Upload and copy the emergency.recover file in place</p>
<ul>
<li>upload the file with scp:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">scp hsm_secret emergency.recover admin@RASPIBLITZ_IP:~/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>copy it from <code>/home/admin/</code>:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo cp /home/admin/emergency.recover /home/bitcoin/.lightning/bitcoin/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo chown bitcoin:bitcoin /home/bitcoin/.lightning/bitcoin/emergency.recover</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Recover</p>
<ul>
<li>run (as admin or bitcoin user):</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli emergencyrecover</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>a list of channelID-s should be returned if it worked:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &quot;stubs&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;................&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>See more data about the recovered funds and channels</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listfunds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listpeers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>List the funding txid-s:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lightning-cli listfunds | jq -r &#x27;.channels[] | .funding_txid&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Can check the txid-s in a mempool explorer. If one is spent that channel is already closed.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="restore-a-cln-node-from-the-database-backup-on-the-sdcard">Restore a CLN node from the database backup on the SDcard<a href="#restore-a-cln-node-from-the-database-backup-on-the-sdcard" class="hash-link" aria-label="Direct link to Restore a CLN node from the database backup on the SDcard" title="Direct link to Restore a CLN node from the database backup on the SDcard">​</a></h3>
<ul>
<li><a href="https://gist.github.com/openoms/3516cd8f393d69d52f858c3d47c9e469" target="_blank" rel="noopener noreferrer">https://gist.github.com/openoms/3516cd8f393d69d52f858c3d47c9e469</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rescan-the-chain-after-restoring-a-used-cln-wallet">Rescan the chain after restoring a used CLN wallet<a href="#rescan-the-chain-after-restoring-a-used-cln-wallet" class="hash-link" aria-label="Direct link to Rescan the chain after restoring a used CLN wallet" title="Direct link to Rescan the chain after restoring a used CLN wallet">​</a></h3>
<ul>
<li>
<p>automatically done when using <code>SEEDRESTORE</code></p>
</li>
<li>
<p>controlled by the entry in the cln config file</p>
</li>
<li>
<p>can use the <code>menu</code> -&gt; <code>REPAIR</code> -&gt; <code>REPAIR-CL</code> -&gt; <code>RESCAN</code> option</p>
</li>
<li>
<p>or follow the manual process:
<a href="https://lightning.readthedocs.io/FAQ.html#rescanning-the-block-chain-for-lost-utxos" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/FAQ.html#rescanning-the-block-chain-for-lost-utxos</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># stop `lightningd`:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl stop lightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># the ungraceful method:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo killall ligthningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Rescan from the block 700000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin lightningd --rescan -700000 --log-level debug</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Rescan the last 1000 blocks:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin lightningd --rescan 1000 --log-level debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>can monitor in a new window using the shortcut:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cllog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="guesstoremote-to-recover-funds-from-force-closed-channels">Guesstoremote to recover funds from force-closed channels<a href="#guesstoremote-to-recover-funds-from-force-closed-channels" class="hash-link" aria-label="Direct link to Guesstoremote to recover funds from force-closed channels" title="Direct link to Guesstoremote to recover funds from force-closed channels">​</a></h3>
<ul>
<li>
<p><a href="https://lightning.readthedocs.io/lightning-hsmtool.8.html" target="_blank" rel="noopener noreferrer">https://lightning.readthedocs.io/lightning-hsmtool.8.html</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ man lightning-hsmtool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">guesstoremote  p2wpkh node_id max_channel_dbid hsm_secret [password]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Brute-force the private key to our funds from a remote unilateral close of a channel, in a case where we have lost all database data except for our hsm_secret.  The peer must be the one to close the channel (and the funds will remain unrecoverable until the channel is closed).  max_channel_dbid is your own guess on what the channel_dbid was, or at least the maximum possible value, and is usually no greater than the number of channels that the node has ever had.  Specify password if the hsm_secret is encrypted.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Usage on the RaspiBlitz (example for mainnet):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin lightning-hsmtool guesstoremote p2wpkh-ADDRESS-bc1... PEER_NODE_ID 5000 /home/bitcoin/.lightning/bitcoin/hsm_secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>The <code>p2wpkh-ADDRESS-bc1...</code> must a be a non-timelocked output. Shows with <code>OP_PUSHBYTES_20</code> in block explorers.</p>
</li>
<li>
<p>The <code>max_channel_dbid</code> = 5000 is usually plenty, can set any higher number</p>
</li>
<li>
<p>If the <code>hsm_secret</code> is encrypted give the password on the end</p>
</li>
<li>
<p>Output if unsuccessful (the private key is not known):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Could not find any basepoint matching the provided witness programme.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Are you sure that the channel used `option_static_remotekey` ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*** stack smashing detected ***: terminated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Aborted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Output if successful:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bech32      : bc1q......................................</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pubkey hash : 0123456789abcdef0123456789abcdef01234567</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pubkey      : 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">privkey     : 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>To import the private key of the address in Electrum Wallet will need to convert to base58</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/matja/bitcoin-tool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd bitcoin-tool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./bitcoin-tool \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --network bitcoin \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --input-type private-key \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --input-format hex \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --input PASTE_THE_privkey_HERE \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --output-type private-key-wif \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --output-format base58check \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --public-key-compression compressed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Example output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">KwFvTne98E1t3mTNAr8pKx67eUzFJWdSNPqPSfxMEtrueW7PcQzL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>To import to the Electrum Wallet use the <code>p2wpkh:</code> prefix:
<a href="https://bitcoinelectrum.com/importing-your-private-keys-into-electrum/" target="_blank" rel="noopener noreferrer">https://bitcoinelectrum.com/importing-your-private-keys-into-electrum/</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">p2wpkh:KxacygL6usxP8T9cFSM2SRW5QsEg66bUQUEn997UWwCZANEe7NLT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sqlite3-queries">sqlite3 queries<a href="#sqlite3-queries" class="hash-link" aria-label="Direct link to sqlite3 queries" title="Direct link to sqlite3 queries">​</a></h2>
<ul>
<li>Query the reasons for force closes<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin sqlite3 /home/bitcoin/.lightning/bitcoin/lightningd.sqlite3 &#x27;select short_channel_id, timestamp, cause, message from channel_state_changes inner join channels on channel_id = id where new_state = 7 order by timestamp&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Query the reasons for cooperative channel closes<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin sqlite3 /home/bitcoin/.lightning/bitcoin/lightningd.sqlite3 &#x27;select short_channel_id, timestamp, cause, message from channel_state_changes inner join channels on channel_id = id where new_state = 4 order by timestamp&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extract-the-private-and-public-key-from-the-hsm_secret-file">Extract the private and public key from the hsm_secret file<a href="#extract-the-private-and-public-key-from-the-hsm_secret-file" class="hash-link" aria-label="Direct link to Extract the private and public key from the hsm_secret file" title="Direct link to Extract the private and public key from the hsm_secret file">​</a></h2>
<p><a href="https://gist.github.com/openoms/0844cf2db807b85fbcffacf1a3fb53bd#file-readme-md" target="_blank" rel="noopener noreferrer">https://gist.github.com/openoms/0844cf2db807b85fbcffacf1a3fb53bd#file-readme-md</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update">Update<a href="#update" class="hash-link" aria-label="Direct link to Update" title="Direct link to Update">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-to-a-new-cln-release">Update to a new CLN release<a href="#update-to-a-new-cln-release" class="hash-link" aria-label="Direct link to Update to a new CLN release" title="Direct link to Update to a new CLN release">​</a></h3>
<ul>
<li>See the tagged releases by the CLN team: <a href="https://github.com/ElementsProject/lightning/releases" target="_blank" rel="noopener noreferrer">github.com/ElementsProject/lightning/releases</a></li>
<li>Will be able to update to new releases from the menu - <code>UPDATE</code> - <code>CL</code></li>
<li>Since downgrading the lightning database is not allowed the updated version will persist if the SDcard is reflashed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-update-to-the-latest-master">Experimental update to the latest master<a href="#experimental-update-to-the-latest-master" class="hash-link" aria-label="Direct link to Experimental update to the latest master" title="Direct link to Experimental update to the latest master">​</a></h3>
<ul>
<li>this won&#x27;t persist in case the SDcard is reflashed so will need to manually update again.</li>
<li>the command to use the built-in script to update to the last commit in the default branch is:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">config.scripts/cl.install.sh update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>if the database version is not compatible with the default version after a downgrade there will be an error message in <code>sudo journalctl -u lightningd</code> similar to:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Refusing to migrate down from version 178 to 176</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>in this case update to the next release from the menu or the latest master again with:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">config.scripts/cl.install.sh update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sqlite3-queries-1">sqlite3 queries<a href="#sqlite3-queries-1" class="hash-link" aria-label="Direct link to sqlite3 queries" title="Direct link to sqlite3 queries">​</a></h2>
<ul>
<li>
<p>Query the reasons for force closes</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin sqlite3 /home/bitcoin/.lightning/bitcoin/lightningd.sqlite3 &#x27;select short_channel_id, timestamp, cause, message from channel_state_changes inner join channels on channel_id = id where new_state = 7 order by timestamp&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Query the reasons for cooperative channel closes</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo -u bitcoin sqlite3 /home/bitcoin/.lightning/bitcoin/lightningd.sqlite3 &#x27;select short_channel_id, timestamp, cause, message from channel_state_changes inner join channels on channel_id = id where new_state = 4 order by timestamp&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="script-file-help-list">Script file help list<a href="#script-file-help-list" class="hash-link" aria-label="Direct link to Script file help list" title="Direct link to Script file help list">​</a></h2>
<ul>
<li>
<p>generate a list of the help texts on a RaspiBlitz:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd /home/admin/config.scripts/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ls cl*.sh &gt; clScriptList.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s#^#./#g&#x27; clScriptList.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i &#x27;s#.sh#.sh -h#g&#x27; clScriptList.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash -x clScriptList.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rm clScriptList.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.backup.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CL RESCUE FILE (tar.gz of complete cl directory)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh cl-export</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh cl-export-gui</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh cl-import [file]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh cl-import-gui [setup|production] [?resultfile]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SEED WORDS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh seed-export-gui [clseeddata]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh seed-import-gui [resultfile]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RECOVERY</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.backup.sh [mainnet|signet|testnet] recoverymode [on|off|status] &lt;-rescanbockheight|rescandepth&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.check.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># script to check CL states</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># cl.check.sh basic-setup</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># cl.check.sh prestart [mainnet|testnet|signet]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.hsmtool.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Create new wallet or import seed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Unlock/lock, encrypt, decrypt, set autounlock or change password for the hsm_secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Create new wallet:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [new] [mainnet|testnet|signet] [?seedpassword]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [new-force] [mainnet|testnet|signet] [?seedpassword]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">There will be no seedpassword(passphrase) used by default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">new-force will backup the old wallet and will work without interaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [seed] [mainnet|testnet|signet] [&quot;space-separated-seed-words&quot;] [?seedpassword]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [seed-force] [mainnet|testnet|signet] [&quot;space-separated-seed-words&quot;] [?seedpassword]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The new hsm_secret will be not encrypted if no NewPassword is given</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">seed-force will delete any old wallet and will work without dialog</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [unlock] &lt;mainnet|testnet|signet&gt; &lt;password&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    success: exit 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    wrong password: exit 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fail to unlock after 1 minute + show logs: exit 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [lock] &lt;mainnet|testnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [encrypt|decrypt] &lt;mainnet|testnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [autounlock-on|autounlock-off] &lt;mainnet|testnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.hsmtool.sh [change-password] &lt;mainnet|testnet|signet&gt; &lt;NewPassword&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.install-service.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Script to set up or update the Core Lightning systemd service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/admin/config.scripts/cl.install-service.sh &lt;mainnet|testnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.install.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Core Lightning install script</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The default version is: v22.11.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mainnet / testnet / signet instances can run parallel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.install.sh install - called by build_sdcard.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.install.sh on &lt;mainnet|testnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.install.sh off &lt;mainnet|testnet|signet&gt; &lt;purge&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.install.sh [update &lt;version&gt;|testPR &lt;PRnumber&gt;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.install.sh display-seed &lt;mainnet|testnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.monitor.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">monitor and troubleshot the c-lightning network</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.monitor.sh [mainnet|testnet|signet] status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.monitor.sh [mainnet|testnet|signet] config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.monitor.sh [mainnet|testnet|signet] info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.monitor.sh [mainnet|testnet|signet] wallet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.backup.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install the backup plugin for Core Lightning</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Replicates the lightningd.sqlite3 database on the SDcard</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.backup.sh [on|off] [testnet|mainnet|signet]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.backup.sh [restore] [testnet|mainnet|signet] [force]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.backup.sh [backup-compact] [testnet|mainnet|signet]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://github.com/lightningd/plugins/tree/master/backup</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.clboss.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install or remove the CLBOSS Core Lightning plugin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: v0.13A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.clboss.sh [on|off] [testnet|mainnet|signet]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.clboss.sh [info]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.cln-grpc.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install the cln-grpc plugin for CLN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.cln-grpc.sh install - called by build_sdcard.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.cln-grpc.sh on &lt;testnet|mainnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.cln-grpc.sh off &lt;testnet|mainnet|signet&gt; &lt;purge&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.cln-grpc.sh status &lt;testnet|mainnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.cln-grpc.sh update &lt;source&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.feeadjuster.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install the feeadjuster plugin for Core Lightning</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.feeadjuster.sh [on|off] &lt;testnet|mainnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.http.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install, remove, connect the c-lightning-http-plugin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: 1dbb6537e0ec5fb9b8edde10db6b4cc613ccdb19</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Implemented for mainnet only.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.http.sh [on|off|connect] &lt;norestart&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.sparko.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install, remove, connect or get info about the Sparko plugin for Core Lightning</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: v2.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.sparko.sh [on|off|menu|connect] [testnet|mainnet|signet] [norestart]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.standard-python.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install and show the output of the chosen plugin for Core Lightning</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.standard-python.sh on [plugin-name] &lt;testnet|mainnet|signet&gt; &lt;persist|runonce&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tested plugins:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">summary | helpme | feeadjuster | paytest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">find more at:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://github.com/lightningd/plugins</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.summary.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install and show the output if the summary plugin forCore Lightning</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.summary.sh [testnet|mainnet|signet] [runonce]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl-plugin.watchtower-client.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install the rust-teos watchtower-client plugin for CLN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.watchtower-client.sh on &lt;testnet|mainnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.watchtower-client.sh off &lt;testnet|mainnet|signet&gt; &lt;purge&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl-plugin.watchtower-client.sh info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.rest.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Core-Lightning-REST install script</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The default version is: v0.9.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mainnet | testnet | signet instances can run parallel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.rest.sh [on|off|connect] &lt;mainnet|testnet|signet&gt; [?key-value]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.setname.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Config script to set the alias of the Core Lightning node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.setname.sh [mainnet|testnet|signet] [?newName]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.spark.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install, remove or get info about the Spark Wallet for Core Lightning</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: v0.3.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.spark.sh [on|off|menu] &lt;testnet|mainnet|signet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ ./cl.update.sh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Interim optional Core Lightning updates between RaspiBlitz releases.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cl.update.sh [info|verified|reckless]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">info -&gt; get actual state and possible actions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">verified -&gt; only do recommended updates by RaspiBlitz team</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    binary will be checked by signature and checksum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">reckless -&gt; if you just want to update to the latest release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    published on Core Lightning GitHub releases (RC or final) without any</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    testing or security checks.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="all-possible-config-options">All possible config options<a href="#all-possible-config-options" class="hash-link" aria-label="Direct link to All possible config options" title="Direct link to All possible config options">​</a></h2>
<ul>
<li>can be shown by running:
<code>lightningd --help</code></li>
<li>To persist the settings place the options in the config file without the <code>--</code> and restart lightningd<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage: lightningd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A bitcoin lightning daemon (default values shown for network: bitcoin).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--conf=&lt;file&gt;                                     Specify configuration file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--lightning-dir=&lt;dir&gt;                             Set base directory: network-specific subdirectory is under here (default: &quot;/home/admin/.lightning&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--network &lt;arg&gt;                                   Select the network parameters (bitcoin, testnet, signet, regtest, litecoin or litecoin-testnet) (default: bitcoin)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--mainnet                                         Alias for --network=bitcoin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--testnet                                         Alias for --network=testnet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--signet                                          Alias for --network=signet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--allow-deprecated-apis &lt;arg&gt;                     Enable deprecated options, JSONRPC commands, fields, etc. (default: true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--rpc-file &lt;arg&gt;                                  Set JSON-RPC socket (or /dev/tty) (default: &quot;lightning-rpc&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--plugin &lt;arg&gt;                                    Add a plugin to be run (can be used multiple times)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--plugin-dir &lt;arg&gt;                                Add a directory to load plugins from (can be used multiple times)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--clear-plugins                                   Remove all plugins added before this option</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--disable-plugin &lt;arg&gt;                            Disable a particular plugin by filename/name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--important-plugin &lt;arg&gt;                          Add an important plugin to be run (can be used multiple times). Die if the plugin dies.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--always-use-proxy &lt;arg&gt;                          Use the proxy always (default: false)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--daemon                                          Run in the background, suppress stdout/stderr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--wallet &lt;arg&gt;                                    Location of the wallet database.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--large-channels|--wumbo                          Allow channels larger than 0.16777215 BTC</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--experimental-dual-fund                          experimental: Advertise dual-funding and allow peers to establish channels via v2 channel open protocol.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--experimental-onion-messages                     EXPERIMENTAL: enable send, receive and relay of onion messages and blinded payments</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--experimental-offers                             EXPERIMENTAL: enable send and receive of offers (also sets experimental-onion-messages)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--experimental-shutdown-wrong-funding             EXPERIMENTAL: allow shutdown with alternate txids</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--announce-addr-dns &lt;arg&gt;                         Use DNS entries in --announce-addr and --addr (not widely supported!) (default: false)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--help|-h                                         Print this message.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--rgb &lt;arg&gt;                                       RRGGBB hex color for node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--alias &lt;arg&gt;                                     Up to 32-byte alias for node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--pid-file=&lt;file&gt;                                 Specify pid file (default: &quot;/home/admin/.lightning/lightningd-bitcoin.pid&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--ignore-fee-limits &lt;arg&gt;                         (DANGEROUS) allow peer to set any feerate (default: false)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--watchtime-blocks &lt;arg&gt;                          Blocks before peer can unilaterally spend funds (default: 144)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--max-locktime-blocks &lt;arg&gt;                       Maximum blocks funds may be locked for (default: 2016)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funding-confirms &lt;arg&gt;                          Confirmations required for funding transaction (default: 3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--cltv-delta &lt;arg&gt;                                Number of blocks for cltv_expiry_delta (default: 34)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--cltv-final &lt;arg&gt;                                Number of blocks for final cltv_expiry (default: 18)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--commit-time=&lt;milliseconds&gt;                       Time after changes before sending out COMMIT (default: 10)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--fee-base &lt;arg&gt;                                  Millisatoshi minimum to charge for HTLC (default: 1000)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--rescan &lt;arg&gt;                                    Number of blocks to rescan from the current head, or absolute blockheight if negative (default: 15)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--fee-per-satoshi &lt;arg&gt;                           Microsatoshi fee for every satoshi in HTLC (default: 10)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--htlc-minimum-msat &lt;arg&gt;                         The default minimal value an HTLC must carry in order to be forwardable for new channels</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--htlc-maximum-msat &lt;arg&gt;                         The default maximal value an HTLC must carry in order to be forwardable for new channel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--max-concurrent-htlcs &lt;arg&gt;                      Number of HTLCs one channel can handle concurrently. Should be between 1 and 483 (default: 30)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--max-dust-htlc-exposure-msat &lt;arg&gt;               Max HTLC amount that can be trimmed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--min-capacity-sat &lt;arg&gt;                          Minimum capacity in satoshis for accepting channels (default: 10000)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--addr &lt;arg&gt;                                      Set an IP address (v4 or v6) to listen on and announce to the network for incoming connections</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bind-addr &lt;arg&gt;                                 Set an IP address (v4 or v6) to listen on, but not announce</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--announce-addr &lt;arg&gt;                             Set an IP address (v4 or v6) or .onion v3 to announce, but not listen on</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--disable-ip-discovery                            Turn off announcement of discovered public IPs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--offline                                         Start in offline-mode (do not automatically reconnect and do not accept incoming connections)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autolisten &lt;arg&gt;                                If true, listen on default port and announce if it seems to be a public interface (default: true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--dev-allowdustreserve &lt;arg&gt;                      If true, we allow the `fundchannel` RPC command and the `openchannel` plugin hook to set a reserve that is below the dust limit.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    (default: false)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--proxy &lt;arg&gt;                                     Set a socks v5 proxy IP address and port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--tor-service-password &lt;arg&gt;                      Set a Tor hidden service password</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--accept-htlc-tlv-types &lt;arg&gt;                     Comma separated list of extra HTLC TLV types to accept.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--disable-dns                                     Disable DNS lookups of peers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--encrypted-hsm                                   Set the password to encrypt hsm_secret with. If no password is passed through command line, you will be prompted to enter it.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--rpc-file-mode &lt;arg&gt;                             Set the file mode (permissions) for the JSON-RPC socket (default: &quot;0600&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--force-feerates &lt;arg&gt;                            Set testnet/regtest feerates in sats perkw, opening/mutual_close/unlateral_close/delayed_to_us/htlc_resolution/penalty: if fewer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    specified, last number applies to remainder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--subdaemon &lt;arg&gt;                                 Arg specified as SUBDAEMON:PATH. Specifies an alternate subdaemon binary. If the supplied path is relative the subdaemon binary is</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    found in the working directory. This option may be specified multiple times. For example, --subdaemon=hsmd:remote_signer would use</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    a hypothetical remote signing subdaemon.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--experimental-websocket-port &lt;arg&gt;               experimental: alternate port for peers to connect using WebSockets (RFC6455)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--database-upgrade &lt;arg&gt;                          Set to true to allow database upgrades even on non-final releases (WARNING: you won&#x27;t be able to downgrade!)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--log-level &lt;arg&gt;                                 log level (io, debug, info, unusual, broken) [:prefix] (default: info)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--log-timestamps &lt;arg&gt;                            prefix log messages with timestamp (default: true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--log-prefix &lt;arg&gt;                                log prefix (default: )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--log-file=&lt;file&gt;                                 Also log to file (- for stdout)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--version|-V                                      Print version and exit</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--fetchinvoice-noconnect                          Don&#x27;t try to connect directly to fetch an invoice.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autocleaninvoice-cycle &lt;arg&gt;                    Perform cleanup of expired invoices every given seconds, or do not autoclean if 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autocleaninvoice-expired-by &lt;arg&gt;               If expired invoice autoclean enabled, invoices that have expired for at least this given seconds are cleaned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-cycle &lt;arg&gt;                           Perform cleanup every given seconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-succeededforwards-age &lt;arg&gt;           How old do successful forwards have to be before deletion (0 = never)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-failedforwards-age &lt;arg&gt;              How old do failed forwards have to be before deletion (0 = never)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-succeededpays-age &lt;arg&gt;               How old do successful pays have to be before deletion (0 = never)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-failedpays-age &lt;arg&gt;                  How old do failed pays have to be before deletion (0 = never)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-paidinvoices-age &lt;arg&gt;                How old do paid invoices have to be before deletion (0 = never)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--autoclean-expiredinvoices-age &lt;arg&gt;             How old do expired invoices have to be before deletion (0 = never)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-datadir &lt;arg&gt;                           -datadir arg for bitcoin-cli</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-cli &lt;arg&gt;                               bitcoin-cli pathname</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-rpcuser &lt;arg&gt;                           bitcoind RPC username</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-rpcpassword &lt;arg&gt;                       bitcoind RPC password</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-rpcconnect &lt;arg&gt;                        bitcoind RPC host to connect to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-rpcport &lt;arg&gt;                           bitcoind RPC host&#x27;s port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bitcoin-retry-timeout &lt;arg&gt;                     how long to keep retrying to contact bitcoind before fatally exiting</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--commit-fee &lt;arg&gt;                                Percentage of fee to request for their commitment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--disable-mpp                                     Disable multi-part payments.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-policy &lt;arg&gt;                             Policy to use for dual-funding requests. [match, available, fixed]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-policy-mod &lt;arg&gt;                         Percent to apply policy at (match/available); or amount to fund (fixed)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-min-their-funding &lt;arg&gt;                  Minimum funding peer must open with to activate our policy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-max-their-funding &lt;arg&gt;                  Maximum funding peer may open with to activate our policy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-per-channel-min &lt;arg&gt;                    Minimum funding we&#x27;ll add to a channel. If we can&#x27;t meet this, we don&#x27;t fund</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-per-channel-max &lt;arg&gt;                    Maximum funding we&#x27;ll add to a channel. We cap all contributions to this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-reserve-tank &lt;arg&gt;                       Amount of funds we&#x27;ll always leave available.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-fuzz-percent &lt;arg&gt;                       Percent to fuzz the policy contribution by. Defaults to 0%. Max is 100%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-fund-probability &lt;arg&gt;                   Percent of requests to consider. Defaults to 100%. Setting to 0% will disable dual-funding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--funder-lease-requests-only &lt;arg&gt;                Only fund lease requests. Defaults to true if channel lease rates are being advertised</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--lease-fee-base-sat &lt;arg&gt;                        Channel lease rates, base fee for leased funds, in satoshi.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--lease-fee-base-msat &lt;arg&gt;                       Channel lease rates, base fee for leased funds, in satoshi.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--lease-fee-basis &lt;arg&gt;                           Channel lease rates, basis charged for leased funds (per 10,000 satoshi.)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--lease-funding-weight &lt;arg&gt;                      Channel lease rates, weight we&#x27;ll ask opening peer to pay for in funding transaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--channel-fee-max-base-msat &lt;arg&gt;                 Channel lease rates, maximum channel fee base we&#x27;ll charge for funds routed through a leased channel.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--channel-fee-max-proportional-thousandths &lt;arg&gt;  Channel lease rates, maximum proportional fee (in thousandths, or ppt) we&#x27;ll charge for funds routed through a leased channel.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    Note: 1ppt = 1,000ppm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bookkeeper-dir &lt;arg&gt;                            Location for bookkeeper records.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--bookkeeper-db &lt;arg&gt;                             Location of the bookkeeper database</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/fusion44/raspiblitz/tree/main/docs/docs/faq/cl.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/faqs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">FAQ&#x27;s</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/faq/contribute"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">contribute</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#common-questions-about-the-different-lightning-network-implementations" class="table-of-contents__link toc-highlight">Common questions about the different Lightning Network implementations</a><ul><li><a href="#can-lnd-and-cln-nodes-open-channels-to-each-other-and-route-payments" class="table-of-contents__link toc-highlight">Can LND and CLN nodes open channels to each other and route payments?</a></li><li><a href="#can-i-run-lnd-and-cln-connected-to-the-same-node" class="table-of-contents__link toc-highlight">Can I run LND and CLN connected to the same node?</a></li><li><a href="#can-i-convert-an-lnd-node-to-cln-or-the-opposite" class="table-of-contents__link toc-highlight">Can I convert an LND node to CLN (or the opposite)?</a></li><li><a href="#is-there-a-table-to-quickly-compare-lnd-and-cln" class="table-of-contents__link toc-highlight">Is there a table to quickly compare LND and CLN?</a></li></ul></li><li><a href="#cln-official-documentation-and-support-channels" class="table-of-contents__link toc-highlight">CLN official documentation and support channels</a></li><li><a href="#commands-and-aliases" class="table-of-contents__link toc-highlight">Commands and aliases</a></li><li><a href="#directories" class="table-of-contents__link toc-highlight">Directories</a></li><li><a href="#config-file" class="table-of-contents__link toc-highlight">Config file</a><ul><li><a href="#default-values" class="table-of-contents__link toc-highlight">Default values</a></li></ul></li><li><a href="#cln-cheatsheet" class="table-of-contents__link toc-highlight">CLN cheatsheet</a></li><li><a href="#plug-ins" class="table-of-contents__link toc-highlight">Plug-ins</a><ul><li><a href="#general-info" class="table-of-contents__link toc-highlight">General info</a></li><li><a href="#directories-1" class="table-of-contents__link toc-highlight">Directories</a></li><li><a href="#implemented-plugins" class="table-of-contents__link toc-highlight">Implemented plugins</a></li><li><a href="#add-a-custom-plugin" class="table-of-contents__link toc-highlight">Add a custom plugin</a></li><li><a href="#clboss" class="table-of-contents__link toc-highlight">CLBOSS</a></li><li><a href="#feeadjuster" class="table-of-contents__link toc-highlight">Feeadjuster</a></li><li><a href="#dual-funded-channels" class="table-of-contents__link toc-highlight">Dual funded channels</a></li><li><a href="#offers" class="table-of-contents__link toc-highlight">Offers</a></li><li><a href="#poncho---hosted-channels" class="table-of-contents__link toc-highlight">Poncho - hosted channels</a></li></ul></li><li><a href="#feature-bits" class="table-of-contents__link toc-highlight">Feature bits</a></li><li><a href="#testnets" class="table-of-contents__link toc-highlight">Testnets</a></li><li><a href="#backups" class="table-of-contents__link toc-highlight">Backups</a><ul><li><a href="#backup-strategy" class="table-of-contents__link toc-highlight">Backup strategy</a></li><li><a href="#seed" class="table-of-contents__link toc-highlight">Seed</a></li><li><a href="#how-to-display-the-hsm_secret-in-a-human-readable-format" class="table-of-contents__link toc-highlight">How to display the hsm_secret in a human-readable format?</a></li><li><a href="#how-to-test-the-seedwords" class="table-of-contents__link toc-highlight">How to test the seedwords?</a></li><li><a href="#how-to-restore-the-hsm_secret-from-text" class="table-of-contents__link toc-highlight">How to restore the hsm_secret from text?</a></li><li><a href="#channel-database" class="table-of-contents__link toc-highlight">Channel database</a></li></ul></li><li><a href="#recovery" class="table-of-contents__link toc-highlight">Recovery</a><ul><li><a href="#recover-from-a-cl-rescue-file" class="table-of-contents__link toc-highlight">Recover from a cl-rescue file</a></li><li><a href="#recover-from-a-seed" class="table-of-contents__link toc-highlight">Recover from a seed</a></li><li><a href="#emergency-recovery-in-case-of-lost-channel-states" class="table-of-contents__link toc-highlight">Emergency recovery in case of lost channel states</a></li><li><a href="#restore-a-cln-node-from-the-database-backup-on-the-sdcard" class="table-of-contents__link toc-highlight">Restore a CLN node from the database backup on the SDcard</a></li><li><a href="#rescan-the-chain-after-restoring-a-used-cln-wallet" class="table-of-contents__link toc-highlight">Rescan the chain after restoring a used CLN wallet</a></li><li><a href="#guesstoremote-to-recover-funds-from-force-closed-channels" class="table-of-contents__link toc-highlight">Guesstoremote to recover funds from force-closed channels</a></li></ul></li><li><a href="#sqlite3-queries" class="table-of-contents__link toc-highlight">sqlite3 queries</a></li><li><a href="#extract-the-private-and-public-key-from-the-hsm_secret-file" class="table-of-contents__link toc-highlight">Extract the private and public key from the hsm_secret file</a></li><li><a href="#update" class="table-of-contents__link toc-highlight">Update</a><ul><li><a href="#update-to-a-new-cln-release" class="table-of-contents__link toc-highlight">Update to a new CLN release</a></li><li><a href="#experimental-update-to-the-latest-master" class="table-of-contents__link toc-highlight">Experimental update to the latest master</a></li></ul></li><li><a href="#sqlite3-queries-1" class="table-of-contents__link toc-highlight">sqlite3 queries</a></li><li><a href="#script-file-help-list" class="table-of-contents__link toc-highlight">Script file help list</a></li><li><a href="#all-possible-config-options" class="table-of-contents__link toc-highlight">All possible config options</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 RaspiBlitz open source project. Built with Docusaurus. Impressum: Christian Rotzoll, christian [ at ] rotzoll.de - this site is not using any cookies and is not storing your data. Icons by https://fontawesome.com/ (CC BY 4.0) and https://lucide.dev/ (ISC)</div></div></div></footer></div>
</body>
</html>