"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[729],{3389:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>a});var s=r(4848),i=r(8453);const t={sidebar_position:3},o="Storage Migration Guide",d={id:"community/storage_migration",title:"Storage Migration Guide",description:"This guide documents - step by step - how to perform a storage migration (moving your RaspiBlitz data & blockchain to a new & bigger drive) without reinstalling the node from scratch with RaspiBlitz v1.12 (or higher) on a Raspberry Pi 5 (or higher).",source:"@site/docs/community/storage_migration.md",sourceDirName:"community",slug:"/community/storage_migration",permalink:"/docs/community/storage_migration",draft:!1,unlisted:!1,editUrl:"https://github.com/fusion44/raspiblitz/tree/main/docs/docs/community/storage_migration.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"blitzSidebar",previous:{title:"Workshop Tutorial",permalink:"/docs/community/workshops"},next:{title:"FAQ's",permalink:"/docs/category/faqs"}},l={},a=[{value:"Contents",id:"contents",level:3},{value:"1. Migration scenarios",id:"1-migration-scenarios",level:2},{value:"2. Hardware &amp; adapter requirements",id:"2-hardware--adapter-requirements",level:2},{value:"A) NVMe on Raspberry Pi\xa05",id:"a-nvme-on-raspberry-pi5",level:3},{value:"B) SATA SSDs (2.5&quot;) on Raspberry Pi\xa05 or 4",id:"b-sata-ssds-25-on-raspberry-pi5-or-4",level:3},{value:"C) Special case \u2014 <strong>SATA\u2011USB SSD \u2192 NVMe on Raspberry Pi\xa05</strong>",id:"c-special-case--satausb-ssd--nvme-on-raspberry-pi5",level:3},{value:"4. What gets migrated",id:"4-what-gets-migrated",level:2},{value:"5. Safety &amp; backup checklist",id:"5-safety--backup-checklist",level:2},{value:"6. Preparation \u2014 Clean shutdown, hardware swap <strong>and SD\u2011card refresh</strong> (mandatory)",id:"6-preparation--clean-shutdown-hardware-swap-and-sdcard-refresh-mandatory",level:2},{value:"1) Clean shutdown",id:"1-clean-shutdown",level:2},{value:"2) Promote the new drive to primary",id:"2-promote-the-new-drive-to-primary",level:2},{value:"Scenario\xa0A \u2014 NVMe \u2192 NVMe (Raspberry Pi\xa05)",id:"scenarioa--nvme--nvme-raspberry-pi5",level:3},{value:"Scenario\xa0B \u2014 SATA\u2011USB SSD \u2192 SATA\u2011USB SSD (Raspberry Pi\xa05 or Pi\xa04)",id:"scenariob--satausb-ssd--satausb-ssd-raspberry-pi5-or-pi4",level:3},{value:"Scenario\xa0C \u2014 SATA\u2011USB SSD \u2192 NVMe (Raspberry Pi\xa05)",id:"scenarioc--satausb-ssd--nvme-raspberry-pi5",level:3},{value:"3) Refresh the microSD with a clean RaspiBlitz image (recommended)",id:"3-refresh-the-microsd-with-a-clean-raspiblitz-image-recommended",level:2},{value:"4) Final prep \u2014 <strong>seat the old drive in its adapter, but do NOT connect yet</strong>",id:"4-final-prep--seat-the-old-drive-in-its-adapter-but-do-not-connect-yet",level:2},{value:"7. Migration \u2014 Boot with the new SD (old drive <strong>still disconnected</strong>) &amp; prepare the <strong>target</strong> drive",id:"7-migration--boot-with-the-new-sd-old-drive-still-disconnected--prepare-the-target-drive",level:2},{value:"2.1 Boot from the new microSD &amp; open setup (via SSH)",id:"21-boot-from-the-new-microsd--open-setup-via-ssh",level:3},{value:"2.2 Connect the <strong>old/source drive</strong> (USB 3.0 blue ports)",id:"22-connect-the-oldsource-drive-usb-30-blue-ports",level:3},{value:"2.3 After selecting <strong>Continue</strong>",id:"23-after-selecting-continue",level:3},{value:"2.4 What to expect during copying",id:"24-what-to-expect-during-copying",level:3},{value:"2.5 Before the final reboot: remove the old/source drive",id:"25-before-the-final-reboot-remove-the-oldsource-drive",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"storage-migration-guide",children:"Storage Migration Guide"})}),"\n",(0,s.jsxs)(n.p,{children:["This guide documents - step by step - how to perform a ",(0,s.jsx)(n.strong,{children:"storage migration"})," (moving your RaspiBlitz data & blockchain to a new & bigger drive) ",(0,s.jsx)(n.strong,{children:"without"})," reinstalling the node from scratch with RaspiBlitz v1.12 (or higher) on a Raspberry Pi 5 (or higher)."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"contents",children:"Contents"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Migration scenarios"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hardware & adapter requirements"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"What gets migrated"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Safety & backup checklist"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Preparation \u2014 Shutdown, Swap Drive & new SD"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Migration \u2014 Boot & Copy Data"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"1-migration-scenarios",children:"1. Migration scenarios"}),"\n",(0,s.jsx)(n.p,{children:"All three scenarios are possible; you only need the matching adapters (see below):"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"SATA\u2011USB SSD \u2192 bigger SATA\u2011USB SSD "}),"\n",(0,s.jsx)(n.li,{children:"SATA\u2011USB SSD \u2192 bigger NVMe\xa0"}),"\n",(0,s.jsx)(n.li,{children:"NVMe \u2192 bigger NVMe"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["These work on ",(0,s.jsx)(n.strong,{children:"Raspberry Pi\xa05"})," (recommended for NVMe). Scenario\xa01 (SATA\u2011USB\xa0\u2192\xa0SATA\u2011USB) also works on ",(0,s.jsx)(n.strong,{children:"Raspberry Pi\xa04"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-hardware--adapter-requirements",children:"2. Hardware & adapter requirements"}),"\n",(0,s.jsx)(n.p,{children:"To copy the data from the old to the new drive - 2 drives need to be connected at the same time to your RaspberryPi. So depending on your scenario you need to choose the matching adapter."}),"\n",(0,s.jsx)(n.h3,{id:"a-nvme-on-raspberry-pi5",children:"A) NVMe on Raspberry Pi\xa05"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NVMe \u2192 NVMe:"})," You\u2019ll need a ",(0,s.jsx)(n.strong,{children:"USB\u2192NVMe adapter/enclosure"})," for the ",(0,s.jsx)(n.em,{children:"second"})," NVMe during migration (the primary NVMe sits on the Pi\xa05 NVMe baseboard - something like this: ",(0,s.jsx)(n.a,{href:"https://www.amazon.de/dp/B0CB7MGWGQ",children:"https://www.amazon.de/dp/B0CB7MGWGQ"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"b-sata-ssds-25-on-raspberry-pi5-or-4",children:'B) SATA SSDs (2.5") on Raspberry Pi\xa05 or 4'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SATA\u2011USB \u2192 SATA\u2011USB (Pi\xa05 or Pi\xa04):"})," Use your existing ",(0,s.jsx)(n.strong,{children:"USB\xa03.0 SATA enclosure/adapter(s)"}),".",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Power nuance:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["On ",(0,s.jsx)(n.strong,{children:"Pi\xa05"}),", a ",(0,s.jsx)(n.em,{children:"bus\u2011powered"})," USB\xa03.0 SATA adapter is generally fine for the additional drive."]}),"\n",(0,s.jsxs)(n.li,{children:["On ",(0,s.jsx)(n.strong,{children:"Pi\xa04"}),", if ",(0,s.jsx)(n.strong,{children:"two SSDs"})," are attached simultaneously, the ",(0,s.jsx)(n.strong,{children:"second SSD should be additionally powered"})," (e.g., powered dock, Y\u2011cable, or enclosure with its own power). In tests this powered dock worked fine: ",(0,s.jsx)(n.a,{href:"https://www.amazon.de/dp/B016UBXH3O",children:"https://www.amazon.de/dp/B016UBXH3O"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"c-special-case--satausb-ssd--nvme-on-raspberry-pi5",children:["C) Special case \u2014 ",(0,s.jsx)(n.strong,{children:"SATA\u2011USB SSD \u2192 NVMe on Raspberry Pi\xa05"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["You ",(0,s.jsx)(n.strong,{children:"do not need to buy an extra migration adapter"}),". You already need the ",(0,s.jsx)(n.strong,{children:"Pi\xa05 NVMe baseboard"})," for normal operation; install the ",(0,s.jsx)(n.strong,{children:"new NVMe"})," on that baseboard as the ",(0,s.jsx)(n.strong,{children:"primary/target"}),". Keep your ",(0,s.jsx)(n.strong,{children:"old SATA SSD"})," in its ",(0,s.jsx)(n.strong,{children:"existing USB\xa0SATA adapter"})," as the ",(0,s.jsx)(n.strong,{children:"secondary/source"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["On ",(0,s.jsx)(n.strong,{children:"Pi\xa05"}),", the SATA USB adapter ",(0,s.jsx)(n.strong,{children:"does not need extra power"})," for this migration."]}),"\n",(0,s.jsxs)(n.li,{children:["The powered\u2011adapter requirement applies ",(0,s.jsx)(n.strong,{children:"only to Pi\xa04"})," when two SSDs are connected at the same time (see section\xa0B)."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-what-gets-migrated",children:"4. What gets migrated"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bitcoin Core data"})," (blockchain, indexes, configuration)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lightning data"})," (LND or CLN\u2014whichever you run)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RaspiBlitz configuration"})," and relevant service data (e.g., web UIs/tools)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-safety--backup-checklist",children:"5. Safety & backup checklist"}),"\n",(0,s.jsxs)(n.p,{children:["Even if you\u2019re \u201cjust\u201d swapping drives, back up ",(0,s.jsx)(n.strong,{children:"before"})," you migrate. This protects you against copy errors, power glitches, etc."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Recommended (preferred):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RaspiBlitz migration bundle"}),' ("Migration Download") \u2014 export the full migration package for your setup.\\']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lightning rescue backup"})," depending on your LN implementation:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LND:"})," ensure you have a fresh ",(0,s.jsx)(n.strong,{children:"Static Channel Backup (SCB)"})," and store it off\u2011device."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Core Lightning (CLN):"})," create the ",(0,s.jsx)(n.strong,{children:"rescue backup"})," via RaspiBlitz (the CLN equivalent), and store it off\u2011device.\\"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Optionally copy ",(0,s.jsx)(n.strong,{children:"TLS certificates"})," and ",(0,s.jsx)(n.strong,{children:"macaroons"})," (can simplify API access after migration)."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Absolute minimum (at least do this):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Your ",(0,s.jsx)(n.strong,{children:"on\u2011chain wallet seed words"})," (24 words), correctly noted and verified."]}),"\n",(0,s.jsxs)(n.li,{children:["For ",(0,s.jsx)(n.strong,{children:"LND"}),", a recent ",(0,s.jsx)(n.strong,{children:"SCB"})," stored safely off the node. For ",(0,s.jsx)(n.strong,{children:"CLN"}),", the respective ",(0,s.jsx)(n.strong,{children:"rescue backup"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Side note:"})," If the node holds ",(0,s.jsx)(n.strong,{children:"no funds"})," (no on\u2011chain balance, no open channels), the backup urgency is lower. Still, it\u2019s good practice to keep basic backups\u2014especially if the device hosts any ",(0,s.jsx)(n.strong,{children:"critical services"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"6-preparation--clean-shutdown-hardware-swap-and-sdcard-refresh-mandatory",children:["6. Preparation \u2014 Clean shutdown, hardware swap ",(0,s.jsx)(n.strong,{children:"and SD\u2011card refresh"})," (mandatory)"]}),"\n",(0,s.jsxs)(n.p,{children:["Do ",(0,s.jsx)(n.strong,{children:"not"})," copy data while the node is running. Shut down cleanly, then place the ",(0,s.jsx)(n.strong,{children:"new, larger drive"})," in the ",(0,s.jsx)(n.em,{children:"primary"})," position, prepare the ",(0,s.jsx)(n.strong,{children:"old drive"})," as the ",(0,s.jsx)(n.strong,{children:"secondary/source"}),", ",(0,s.jsx)(n.strong,{children:"refresh the microSD"}),", and only then proceed."]}),"\n",(0,s.jsx)(n.h2,{id:"1-clean-shutdown",children:"1) Clean shutdown"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"From RaspiBlitz UI:"})," ",(0,s.jsx)(n.em,{children:"Shutdown"}),"\\"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"From shell (preferred on RaspiBlitz):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"OFF\n"})}),"\n","The ",(0,s.jsx)(n.code,{children:"OFF"})," command triggers RaspiBlitz\u2019s safe shutdown routine."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Standard Linux alternative:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo shutdown -h now\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Wait until LEDs indicate the system is fully off."}),"\n",(0,s.jsx)(n.h2,{id:"2-promote-the-new-drive-to-primary",children:"2) Promote the new drive to primary"}),"\n",(0,s.jsxs)(n.p,{children:["After the system is off, swap the roles of the drives so that the ",(0,s.jsx)(n.strong,{children:"new, larger drive"})," becomes the ",(0,s.jsx)(n.strong,{children:"primary/target"})," and the old drive becomes the ",(0,s.jsx)(n.strong,{children:"secondary/source"})," attached over USB (but ",(0,s.jsx)(n.strong,{children:"don\u2019t plug it in yet"})," \u2014 see Final Prep below)."]}),"\n",(0,s.jsx)(n.h3,{id:"scenarioa--nvme--nvme-raspberry-pi5",children:"Scenario\xa0A \u2014 NVMe \u2192 NVMe (Raspberry Pi\xa05)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Remove the ",(0,s.jsx)(n.strong,{children:"old 1\xa0TB NVMe"})," from the ",(0,s.jsx)(n.strong,{children:"Pi\xa05 NVMe baseboard"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Install the ",(0,s.jsx)(n.strong,{children:"new 2\xa0TB NVMe"})," onto the ",(0,s.jsx)(n.strong,{children:"NVMe baseboard"})," (now ",(0,s.jsx)(n.strong,{children:"primary/target"}),").",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"Check form factor (e.g., 2280) and keying; use the standoff/screw."})]}),"\n",(0,s.jsxs)(n.li,{children:["Place the ",(0,s.jsx)(n.strong,{children:"old 1\xa0TB NVMe"})," into a ",(0,s.jsx)(n.strong,{children:"USB\u2192NVMe adapter/enclosure"})," (this will be ",(0,s.jsx)(n.strong,{children:"secondary/source"}),").\\"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"scenariob--satausb-ssd--satausb-ssd-raspberry-pi5-or-pi4",children:"Scenario\xa0B \u2014 SATA\u2011USB SSD \u2192 SATA\u2011USB SSD (Raspberry Pi\xa05 or Pi\xa04)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Remove the ",(0,s.jsx)(n.strong,{children:'old 1\xa0TB 2.5" SSD'})," from your ",(0,s.jsx)(n.strong,{children:"main USB\xa03.0 SATA enclosure/adapter"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Insert the ",(0,s.jsx)(n.strong,{children:'new 2\xa0TB 2.5" SSD'})," into that ",(0,s.jsx)(n.strong,{children:"main enclosure/adapter"})," (now ",(0,s.jsx)(n.strong,{children:"primary/target"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Put the ",(0,s.jsx)(n.strong,{children:"old 1\xa0TB SSD"})," into your ",(0,s.jsx)(n.strong,{children:"second USB\xa03.0 SATA adapter/dock"})," (this will be ",(0,s.jsx)(n.strong,{children:"secondary/source"}),").","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["On ",(0,s.jsx)(n.strong,{children:"Pi\xa05"}),", bus\u2011powered is typically fine."]}),"\n",(0,s.jsxs)(n.li,{children:["On ",(0,s.jsx)(n.strong,{children:"Pi\xa04"}),", the ",(0,s.jsx)(n.strong,{children:"secondary/source should be additionally powered"})," (powered dock/Y\u2011cable).\\"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"scenarioc--satausb-ssd--nvme-raspberry-pi5",children:"Scenario\xa0C \u2014 SATA\u2011USB SSD \u2192 NVMe (Raspberry Pi\xa05)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"No extra migration adapter needed:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Install the ",(0,s.jsx)(n.strong,{children:"new 2\xa0TB NVMe"})," on the ",(0,s.jsx)(n.strong,{children:"Pi\xa05 NVMe baseboard"})," (",(0,s.jsx)(n.strong,{children:"primary/target"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Place the ",(0,s.jsx)(n.strong,{children:"old 1\xa0TB SATA SSD"})," in its ",(0,s.jsx)(n.strong,{children:"existing USB\xa03.0 SATA adapter"})," (this will be ",(0,s.jsx)(n.strong,{children:"secondary/source"}),").\\"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"3-refresh-the-microsd-with-a-clean-raspiblitz-image-recommended",children:"3) Refresh the microSD with a clean RaspiBlitz image (recommended)"}),"\n",(0,s.jsxs)(n.p,{children:["With the Pi powered off, remove the ",(0,s.jsx)(n.strong,{children:"microSD card"})," and flash a ",(0,s.jsx)(n.strong,{children:"fresh RaspiBlitz image"})," \u2014 at least ",(0,s.jsx)(n.strong,{children:"v1.12"}),", or a newer release if available."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why now?"})," Doing this between shutdown and the copy avoids filesystem surprises and ensures you\u2019ll boot into a clean userspace for the migration steps."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Capacity & rollback recommendation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Upgrade to a 64\xa0GB microSD."})," Older installs often used 32\xa0GB; moving to ",(0,s.jsx)(n.strong,{children:"64\xa0GB"})," provides more headroom for logs and updates."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use a second, new microSD for this update."})," Keep your ",(0,s.jsx)(n.strong,{children:"existing microSD untouched"})," as a fallback. If anything goes wrong during migration, you can re\u2011insert the ",(0,s.jsx)(n.strong,{children:"old microSD"})," ",(0,s.jsx)(n.em,{children:"and"})," the ",(0,s.jsx)(n.strong,{children:"old drive"})," to boot the node back in its previous state."]}),"\n",(0,s.jsxs)(n.li,{children:["(Optional but helpful) Choose a ",(0,s.jsx)(n.strong,{children:"UHS\u2011I A1/A2\u2011rated"})," card from a reputable brand for better I/O consistency."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Steps (summary):"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Remove the microSD from the Pi."}),"\n",(0,s.jsxs)(n.li,{children:["Download the latest ",(0,s.jsx)(n.strong,{children:"RaspiBlitz image"})," (>= v1.12).\\"]}),"\n",(0,s.jsxs)(n.li,{children:["Flash the image to the ",(0,s.jsx)(n.strong,{children:"new 64\xa0GB microSD"})," using your preferred tool like ",(0,s.jsx)(n.strong,{children:"balenaEtcher"})," : ",(0,s.jsx)(n.a,{href:"https://etcher.balena.io%5C",children:"https://etcher.balena.io\\"})]}),"\n",(0,s.jsxs)(n.li,{children:["Safely eject the card and re\u2011insert into the Pi (leave the Pi ",(0,s.jsx)(n.strong,{children:"powered off"})," until the copy setup is ready)."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"4-final-prep--seat-the-old-drive-in-its-adapter-but-do-not-connect-yet",children:["4) Final prep \u2014 ",(0,s.jsx)(n.strong,{children:"seat the old drive in its adapter, but do NOT connect yet"})]}),"\n",(0,s.jsxs)(n.p,{children:["As the last preparation step of ",(0,s.jsx)(n.strong,{children:"Preparation"}),", seat the ",(0,s.jsx)(n.strong,{children:"old (source) drive"})," in its adapter \u2014 but ",(0,s.jsx)(n.strong,{children:"do not plug it into the Raspberry Pi yet"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why this matters"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Avoids accidental boot from the ",(0,s.jsx)(n.strong,{children:"old drive"})," or confusing device order at first power\u2011on."]}),"\n",(0,s.jsxs)(n.li,{children:["Ensures the Pi boots cleanly from the ",(0,s.jsx)(n.strong,{children:"fresh microSD"})," and recognizes the ",(0,s.jsx)(n.strong,{children:"new primary/target drive"})," first."]}),"\n",(0,s.jsx)(n.li,{children:"Prevents early automounts that might interfere with partitioning and mount configuration."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What to do"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Place the ",(0,s.jsx)(n.strong,{children:"old drive"})," into the corresponding adapter:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NVMe source:"})," slide into the ",(0,s.jsx)(n.strong,{children:"USB\u2192NVMe enclosure"})," (leave its USB cable ",(0,s.jsx)(n.strong,{children:"unplugged"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:'SATA source (2.5" SSD):'})," attach to the ",(0,s.jsx)(n.strong,{children:"USB 3.0 SATA adapter/dock"})," (leave its USB cable ",(0,s.jsx)(n.strong,{children:"unplugged"}),"; on Pi\xa04, attach external power to the dock only when instructed later)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Route the cable so it\u2019s ready, but keep the ",(0,s.jsx)(n.strong,{children:"USB end disconnected from the Pi"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"7-migration--boot-with-the-new-sd-old-drive-still-disconnected--prepare-the-target-drive",children:["7. Migration \u2014 Boot with the new SD (old drive ",(0,s.jsx)(n.strong,{children:"still disconnected"}),") & prepare the ",(0,s.jsx)(n.strong,{children:"target"})," drive"]}),"\n",(0,s.jsxs)(n.p,{children:["In this step you start the Raspberry Pi/RaspiBlitz using the ",(0,s.jsx)(n.strong,{children:"fresh 64\xa0GB microSD"})," you flashed in ",(0,s.jsx)(n.strong,{children:"Preparation"}),". Make sure the ",(0,s.jsx)(n.strong,{children:"old/source drive is NOT connected"})," yet. Only the ",(0,s.jsx)(n.strong,{children:"new/target drive"})," should be present (NVMe on the Pi\xa05 baseboard, or the new SATA SSD in the main USB enclosure)."]}),"\n",(0,s.jsx)(n.h3,{id:"21-boot-from-the-new-microsd--open-setup-via-ssh",children:"2.1 Boot from the new microSD & open setup (via SSH)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When the setup menu opens"})," in your terminal session, choose: ",(0,s.jsx)(n.strong,{children:"From HDD \u2192 Copy from HDD/SSD/NVMe"}),". This is the migration entry that initiates copying data from your ",(0,s.jsx)(n.strong,{children:"old/source drive"})," to the ",(0,s.jsx)(n.strong,{children:"new/target drive"}),"."]}),"\n",(0,s.jsx)("img",{src:"/img/migration/migration1.png"}),"\n",(0,s.jsxs)(n.h3,{id:"22-connect-the-oldsource-drive-usb-30-blue-ports",children:["2.2 Connect the ",(0,s.jsx)(n.strong,{children:"old/source drive"})," (USB 3.0 blue ports)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Now plug the adapter with the ",(0,s.jsx)(n.strong,{children:"old drive"})," into a ",(0,s.jsx)(n.strong,{children:"USB 3.0"})," port on the Raspberry Pi. These ports are typically marked with ",(0,s.jsx)(n.strong,{children:"blue plastic"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Avoid USB 2.0 (black) ports \u2014 they are slower and may cause timeouts during large transfers."}),"\n",(0,s.jsxs)(n.li,{children:["If you\u2019re on a ",(0,s.jsx)(n.strong,{children:"Raspberry Pi 4"})," and using two SATA SSDs, ensure the ",(0,s.jsx)(n.strong,{children:"second (source) SSD"})," has ",(0,s.jsx)(n.strong,{children:"additional power"})," (powered dock/Y\u2011cable), as noted in the adapter section."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Back in the migration dialog (",(0,s.jsx)(n.strong,{children:"Migrate Data"}),"):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"Start migration"})," to begin the copy process from the just\u2011connected ",(0,s.jsx)(n.strong,{children:"source"})," to the ",(0,s.jsx)(n.strong,{children:"target"}),"."]}),"\n"]}),"\n",(0,s.jsx)("img",{src:"/img/migration/migration2.png"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Only if"}),"\xa0the old drive is ",(0,s.jsx)(n.strong,{children:"not detected:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Re\u2011check all physical connections: Is the drive fully seated in the adapter? Is the adapter firmly connected to a ",(0,s.jsx)(n.strong,{children:"USB 3.0 (blue)"})," port? For NVMe, is the module correctly keyed and screwed down? For SATA, is the connector fully engaged?"]}),"\n",(0,s.jsxs)(n.li,{children:["On a ",(0,s.jsx)(n.strong,{children:"Raspberry Pi 4"}),", ensure the ",(0,s.jsx)(n.strong,{children:"source SSD/adapter"})," has ",(0,s.jsx)(n.strong,{children:"additional power"})," (powered dock or Y\u2011cable), as noted earlier."]}),"\n",(0,s.jsx)(n.li,{children:"Make sure that the new bigger drive is empty with no partitions"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Worst-Case Fallback: If it still won\u2019t show up, disconnect power, put the ",(0,s.jsx)(n.strong,{children:"old microSD"})," and the ",(0,s.jsx)(n.strong,{children:"old drive"})," back into their original places, and boot the system to restore the previous state. You can then investigate and retry the migration later."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Normally you will see a dialog showing the old & the new drive and if all looks good, choose continue."}),"\n",(0,s.jsxs)(n.h3,{id:"23-after-selecting-continue",children:["2.3 After selecting ",(0,s.jsx)(n.strong,{children:"Continue"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The wizard may ask for basic restore/setup details (e.g., ",(0,s.jsx)(n.strong,{children:"password confirmation"}),", regional options). Follow the prompts."]}),"\n",(0,s.jsxs)(n.li,{children:["Once confirmed, the ",(0,s.jsx)(n.strong,{children:"copy process"})," starts."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"24-what-to-expect-during-copying",children:"2.4 What to expect during copying"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Duration depends on disk speed and data size; ",(0,s.jsx)(n.strong,{children:"several hours"})," is normal for full nodes."]}),"\n",(0,s.jsxs)(n.li,{children:["In the terminal you\u2019ll see ",(0,s.jsx)(n.strong,{children:"progress updates"}),"; on the hardware you\u2019ll usually see ",(0,s.jsx)(n.strong,{children:"activity LEDs blinking"})," while data is copied."]}),"\n",(0,s.jsxs)(n.li,{children:["It\u2019s common to see phases (e.g., ",(0,s.jsx)(n.strong,{children:"blockchain first"}),", then ",(0,s.jsx)(n.strong,{children:"Lightning/service data"}),"). As a result, the ",(0,s.jsx)(n.strong,{children:"percentage may jump or pause"}),"\u2014that\u2019s normal."]}),"\n",(0,s.jsx)(n.li,{children:"Avoid disconnecting power or cables until the process completes."}),"\n"]}),"\n",(0,s.jsx)("img",{src:"/img/migration/migration3.png"}),"\n",(0,s.jsx)(n.h3,{id:"25-before-the-final-reboot-remove-the-oldsource-drive",children:"2.5 Before the final reboot: remove the old/source drive"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["After the copy and remaining system install finish and the wizard prompts for a reboot, ",(0,s.jsx)(n.strong,{children:"unplug the old drive/adapter"})," from USB ",(0,s.jsx)(n.strong,{children:"before"})," continuing."]}),"\n",(0,s.jsxs)(n.li,{children:["This avoids accidentally booting from or auto\u2011mounting the old disk and ensures the Pi starts with the ",(0,s.jsx)(n.strong,{children:"new target drive only"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["On ",(0,s.jsx)(n.strong,{children:"Pi\xa04"})," with powered docks/Y\u2011cables, also ",(0,s.jsx)(n.strong,{children:"switch off/undo the extra power"})," to the source dock."]}),"\n",(0,s.jsxs)(n.li,{children:["Then proceed with ",(0,s.jsx)(n.strong,{children:"Reboot"})," in the wizard."]}),"\n"]}),"\n",(0,s.jsx)("img",{src:"/img/migration/migration4.png"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>d});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);